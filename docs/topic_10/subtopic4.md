---
sidebar_position: 4
---

# StringBuilder

`StringBuilder` – це спеціалізований клас у C#, який надається для ефективної роботи з рядками, коли потрібні часті
зміни вмісту рядка. Основна особливість цього класу полягає в тому, що він може змінювати свій вміст без створення нових
об'єктів, що робить його більш оптимальним у порівнянні зі стандартним класом `String` при виконанні певних типів
операцій.

### Особливості класу StringBuilder

1. **Мутованість**:
    - Об'єкти класу `String` у C# є незмінними (immutable). Це означає, що будь-яка зміна рядка фактично створює новий
      об'єкт, а не змінює існуючий.
    - `StringBuilder` дозволяє змінювати свій вміст без створення нового об'єкта. Це досягається завдяки тому, що
      `StringBuilder` працює з динамічним буфером, що дозволяє збільшувати або зменшувати розмір рядка без постійного
      створення нових об'єктів.
2. **Ефективність**:
    - Якщо ви виконуєте часті операції конкатенації або модифікації рядків, використання `String` може бути
      неефективним, оскільки кожна операція створює новий об'єкт. Це призводить до додаткових витрат на виділення
      пам'яті та час.
    - `StringBuilder` знижує ці витрати, оскільки працює з внутрішнім буфером, який змінюється по мірі необхідності.
3. **Розширюваність**:
    - `StringBuilder` може автоматично збільшувати розмір свого внутрішнього буфера, якщо ви додаєте більше символів,
      ніж він може вмістити.

### Де використовувати StringBuilder?

`StringBuilder` доцільно використовувати в тих випадках, коли потрібно виконувати багато операцій над рядками, таких як:

- Часті операції додавання (конкатенації) рядків.
- Додавання або вставка підрядків у різних місцях.
- Видалення частин рядка або зміна його вмісту.
- Формування динамічного тексту (наприклад, створення HTML-коду, SQL-запитів, або великих текстових документів).

### Приклад використання StringBuilder

### Конкатенація рядків за допомогою StringBuilder

Якщо вам потрібно виконати багаторазову конкатенацію рядків, замість використання оператора `+`, краще скористатися
`StringBuilder`.

```csharp
using System.Text;

StringBuilder sb = new StringBuilder();
sb.Append("Hello");
sb.Append(", ");
sb.Append("World!");

string result = sb.ToString();  // "Hello, World!"
```

### 2. Вставка та видалення символів

`StringBuilder` дозволяє легко додавати або видаляти символи в будь-якому місці рядка.

```csharp
StringBuilder sb = new StringBuilder("Hello World!");
sb.Insert(5, ", Beautiful");  // "Hello, Beautiful World!"
sb.Remove(13, 9);            // "Hello, Beautiful!"
```

### 3. Заміна символів або підрядків

Метод `Replace()` дозволяє змінювати певні символи або підрядки в рядку.

```csharp
StringBuilder sb = new StringBuilder("I love cats");
sb.Replace("cats", "dogs");  // "I love dogs"
```

### 4. Динамічна зміна буфера

Клас `StringBuilder` автоматично збільшує свій буфер, якщо потрібно зберегти більше символів.

```csharp
StringBuilder sb = new StringBuilder(10);  // Стартова ємність 10 символів
sb.Append("This is a very long string");  // Буфер автоматично розшириться
```

### Порівняння String і StringBuilder

| Характеристика   | String                                                  | StringBuilder                                                      |
|------------------|---------------------------------------------------------|--------------------------------------------------------------------|
| **Мутованість**  | Незмінний (immutable), кожна зміна створює новий об'єкт | Мутований (mutable), змінюється вміст без створення нового об'єкта |
| **Ефективність** | Не підходить для частих змін рядків                     | Оптимальний для частої конкатенації або модифікації                |
| **Пам'ять**      | Створюється новий об'єкт при кожній зміні               | Один об'єкт, що змінюється в пам'яті                               |
| **Використання** | Для роботи з невеликими або рідко змінюваними рядками   | Для частих змін або довгих рядків                                  |

### Коли краще використовувати String?

- Якщо рядки залишаються незмінними після створення (наприклад, для імен, коротких повідомлень, URL тощо).
- Якщо виконується лише невелика кількість операцій над рядками.
- Якщо рядки використовуються в якості ключів у структурах даних, таких як словники (якщо важлива незмінність об'єктів).

### Коли краще використовувати StringBuilder?

- Якщо виконується багаторазова конкатенація рядків або побудова рядків у циклах.
- Якщо необхідно динамічно модифікувати рядок: додавати, видаляти або змінювати підрядки.
- При роботі з великими текстовими даними або форматуванням.

